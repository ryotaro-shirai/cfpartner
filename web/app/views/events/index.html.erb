<div class="page">
  <header class="page-header">
    <p class="eyebrow">CfP Tracker</p>
    <h1 class="page-title">CfPartner</h1>
    <p class="page-description">
      カンファレンスのCfP期限をひと目で把握できるシンプルな一覧です。
    </p>
  </header>

  <section class="events-section">
    <div class="events-grid">
      <% @events.each do |event| %>
        <% badge = cfp_status_badge(event) %>
        <%= link_to event.url, target: "_blank", rel: "noopener", class: "event-card-link" do %>
          <article class="event-card">
            <% if event.image_url.present? %>
              <div class="event-thumb">
                <%= image_tag event.image_url, alt: "#{event.name}のイメージ" %>
              </div>
            <% else %>
              <div class="event-thumb placeholder">No image</div>
            <% end %>

            <div class="event-body">
              <div class="event-meta">
                <span class="status-badge <%= badge[:tone] %>"><%= badge[:label] %></span>
                <% if event.cfp_end_at.present? %>
                  <span class="event-deadline">締切 <%= l(event.cfp_end_at, format: :long) %></span>
                <% end %>
              </div>

              <h3 class="event-title"><%= event.name %></h3>

              <% if event.cfp_start_at.present? && event.cfp_end_at.present? %>
                <p class="event-period"><%= l(event.cfp_start_at, format: :long) %> 〜 <%= l(event.cfp_end_at, format: :long) %></p>
              <% elsif event.cfp_end_at.present? %>
                <p class="event-period">〆切 <%= l(event.cfp_end_at, format: :long) %></p>
              <% else %>
                <p class="event-period muted">スケジュール未定</p>
              <% end %>
            </div>
          </article>
        <% end %>
      <% end %>

      <% if @events.empty? %>
        <div class="empty-state">
          <p>まだイベントが登録されていません。</p>
          <p>左上の管理画面から追加してください。</p>
        </div>
      <% end %>
    </div>
  </section>
</div>
